'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var utilCrypto = require('@polkadot/util-crypto');
var util = require('@polkadot/util');
var CreateType = require('../create-type/CreateType.js');

function generateCodeHash(code) {
    return utilCrypto.blake2AsHex(util.u8aToU8a(code), 256);
}
function generateProgramId(codeOrHash, salt) {
    const [code, codeHash] = typeof codeOrHash === 'string' ? [undefined, codeOrHash] : [codeOrHash, undefined];
    const codeHashU8a = codeHash ? util.u8aToU8a(codeHash) : utilCrypto.blake2AsU8a(code, 256);
    const saltU8a = CreateType.CreateType.create('Vec<u8>', salt).toU8a().slice(1);
    const id = new Uint8Array(codeHashU8a.byteLength + saltU8a.byteLength);
    id.set(codeHashU8a);
    id.set(saltU8a, codeHashU8a.byteLength);
    return utilCrypto.blake2AsHex(id, 256);
}

exports.generateCodeHash = generateCodeHash;
exports.generateProgramId = generateProgramId;
